import U from"./FormWrapper-5c0db3ce.js";import g from"./ButtonComp-7a3fe749.js";import o from"./InputLabel-69092e66.js";import y from"./TextInput-414aae93.js";import $ from"./BrandSelect-79e0fe45.js";import k from"./MachineTypeSelect-12373e3f.js";import B from"./MachineModelSelect-8f2a2e9e.js";import C from"./DepartmentSelect-20b0fcb3.js";import F from"./AreaSelect-d5b0446d.js";import p from"./DatePicker-3e693273.js";import{_ as n}from"./InputError-fee228bf.js";import{g as N}from"./globalMixin-827f0fbc.js";import{i as b,q as D,j as q,o as r,e as m,b as l,w as f,a as s,f as _,g as v}from"./app-92be7c25.js";const A={class:"flex flex-wrap items-end -mx-3"},P={class:"w-full max-w-full px-3 lg:w-1/4 md:w-1/4"},j={class:"mb-4"},E={key:0,class:"w-full max-w-full px-3 lg:w-1/4 md:w-1/4"},W={class:"mb-4"},Y={class:"w-full max-w-full px-3 lg:w-1/4 md:w-1/4"},z={key:0,class:"mb-4"},G={class:"w-full max-w-full px-3 lg:w-1/4 md:w-1/4"},H={key:0,class:"mb-4"},J={class:"w-full max-w-full px-3 lg:w-1/4 md:w-1/4"},K={key:0,class:"mb-4"},L={class:"w-full max-w-full px-3 lg:w-1/4 md:w-1/4"},O={key:0,class:"mb-4"},Q={class:"w-full max-w-full px-3 lg:w-1/4 md:w-1/4"},R={key:0,class:"mb-4"},X={class:"w-full max-w-full px-3 lg:w-1/4 md:w-1/4"},Z={class:"mb-4"},ee={class:"w-full max-w-full px-3 lg:w-1/4 md:w-1/4"},ae={class:"mb-4"},te={class:"w-full max-w-full px-3 lg:w-1/4 md:w-1/4"},le={class:"mb-4"},de={class:"w-full max-w-full px-3 lg:w-1/4 md:w-1/4"},se={class:"mb-4"},ye={__name:"MachineForm",props:["form_id"],emits:["resetForm"],setup(x,{emit:w}){const c=x,{base_url:h,copyProperties:V,refreshComponent:u}=N(),a=b(new Form({form_id:0,name:"",name_code_no:"",serial_no:"",brand_id:"",model_id:"",machine_type_id:"",department_id:"",area_id:"",buy_date:"",installation_date:"",warranty_upto_date:""})),t=b({create_url:"machines",show:!0,modelInitials:[],modelSelected:[],machineTypeInitials:[],machineTypeSelected:[],departmentInitials:[],departmentSelected:[],areaInitials:[],areaSelected:[],brandInitials:[],brandSelected:[],showbrandType:!0}),S=D(()=>c.form_id>0?"Update Machine":"Add Machine");q(()=>{c.form_id>0&&T()});const I=()=>{a.postForm(t.create_url).then(function(i){console.log(i),i.success&&(w("resetForm"),Utilities.showPopMessage("Your data has been saved successfully!"))}).catch(function(i){})},T=()=>{axios.get(h.value+"/machines/"+c.form_id+"/edit").then(function(i){if(i.data.success){let e=i.data.machine;V(e,a),a.form_id=e.id,e.machine_model&&(t.modelInitials=[{id:e.machine_model.id,text:e.machine_model.model_no}],t.modelSelected=[e.machine_model.id]),e.machine_type&&(t.machineTypeInitials=[{id:e.machine_type.id,text:e.machine_type.name}],t.machineTypeSelected=[e.machine_type.id]),e.department&&(t.departmentInitials=[{id:e.department.id,text:e.department.name}],t.departmentSelected=[e.department.id]),e.brand&&(t.brandInitials=[{id:e.brand.id,text:e.brand.name}],t.brandSelected=[e.brand.id]),e.area&&(t.areaInitials=[{id:e.area.id,text:e.area.name}],t.areaSelected=[e.area.id]),u(t,"show"),u(t,"showbrandType")}a.form_id=c.form_id}).catch(function(i){})},M=i=>{axios.get(h.value+"/machine-models/"+i+"/edit").then(function(e){let d=e.data.machine_model;d.machine_type&&(t.machineTypeInitials=[{id:d.machine_type.id,text:d.machine_type.name}],t.machineTypeSelected=[d.machine_type.id],a.machine_type_id=d.machine_type.id),d.brand&&(t.brandInitials=[{id:d.brand.id,text:d.brand.name}],t.brandSelected=[d.brand.id],a.brand_id=d.brand.id),u(t,"showbrandType")}).catch(function(e){console.log(e)})};return(i,e)=>(r(),m("div",null,[l(U,{title:S.value},{default:f(()=>[s("div",A,[s("div",P,[s("div",j,[l(o,{for:"serial_no",value:"Serial No."}),l(y,{modelValue:a.serial_no,"onUpdate:modelValue":e[0]||(e[0]=d=>a.serial_no=d),type:"text",required:"",autofocus:"",error:!!a.errors.get("serial_no")},null,8,["modelValue","error"]),l(n,{class:"mt-2",message:a.errors.get("serial_no")},null,8,["message"])])]),a.form_id>0?(r(),m("div",E,[s("div",W,[l(o,{for:"name_code_no",value:"Code No.(Auto generated)"}),l(y,{modelValue:a.name_code_no,"onUpdate:modelValue":e[1]||(e[1]=d=>a.name_code_no=d),disabled:"",type:"text",required:"",autofocus:"",error:!!a.errors.get("name_code_no")},null,8,["modelValue","error"]),l(n,{class:"mt-2",message:a.errors.get("name_code_no")},null,8,["message"])])])):_("",!0),s("div",Y,[t.show?(r(),m("div",z,[l(o,{for:"model_id",value:"Model No."}),l(B,{modelValue:a.model_id,"onUpdate:modelValue":e[2]||(e[2]=d=>a.model_id=d),initials:t.modelInitials,selected:t.modelSelected,onUpdateMachineModel:M},null,8,["modelValue","initials","selected"]),l(n,{class:"mt-2",message:a.errors.get("model_id")},null,8,["message"])])):_("",!0)]),s("div",G,[t.showbrandType?(r(),m("div",H,[l(o,{for:"brand_id",value:"Brand"}),l($,{modelValue:a.brand_id,"onUpdate:modelValue":e[3]||(e[3]=d=>a.brand_id=d),disabled:!0,initials:t.brandInitials,selected:t.brandSelected},null,8,["modelValue","initials","selected"]),l(n,{class:"mt-2",message:a.errors.get("brand_id")},null,8,["message"])])):_("",!0)]),s("div",J,[t.showbrandType?(r(),m("div",K,[l(o,{for:"machine_type_id",value:"Machine Type"}),l(k,{disabled:!0,modelValue:a.machine_type_id,"onUpdate:modelValue":e[4]||(e[4]=d=>a.machine_type_id=d),initials:t.machineTypeInitials,selected:t.machineTypeSelected},null,8,["modelValue","initials","selected"]),l(n,{class:"mt-2",message:a.errors.get("machine_type_id")},null,8,["message"])])):_("",!0)]),s("div",L,[t.show?(r(),m("div",O,[l(o,{for:"department_id",value:"Department"}),l(C,{modelValue:a.department_id,"onUpdate:modelValue":e[5]||(e[5]=d=>a.department_id=d),initials:t.departmentInitials,selected:t.departmentSelected},null,8,["modelValue","initials","selected"]),l(n,{class:"mt-2",message:a.errors.get("department_id")},null,8,["message"])])):_("",!0)]),s("div",Q,[t.show?(r(),m("div",R,[l(o,{for:"area_id",value:"Area"}),l(F,{modelValue:a.area_id,"onUpdate:modelValue":e[6]||(e[6]=d=>a.area_id=d),department_id:a.department_id,initials:t.areaInitials,selected:t.areaSelected},null,8,["modelValue","department_id","initials","selected"]),l(n,{class:"mt-2",message:a.errors.get("area_id")},null,8,["message"])])):_("",!0)]),s("div",X,[s("div",Z,[l(o,{for:"buy_date",value:"Buy Date"}),l(p,{modelValue:a.buy_date,"onUpdate:modelValue":e[7]||(e[7]=d=>a.buy_date=d),"class-name":"buy_date",error:!!a.errors.get("buy_date")},null,8,["modelValue","error"]),l(n,{class:"mt-2",message:a.errors.get("buy_date")},null,8,["message"])])]),s("div",ee,[s("div",ae,[l(o,{for:"warranty_upto_date",value:"Warranty Date"}),l(p,{modelValue:a.warranty_upto_date,"onUpdate:modelValue":e[8]||(e[8]=d=>a.warranty_upto_date=d),"class-name":"warranty_upto_date",error:!!a.errors.get("warranty_upto_date")},null,8,["modelValue","error"]),l(n,{class:"mt-2",message:a.errors.get("warranty_upto_date")},null,8,["message"])])]),s("div",te,[s("div",le,[l(o,{for:"installation_date",value:"Installation Date"}),l(p,{modelValue:a.installation_date,"onUpdate:modelValue":e[9]||(e[9]=d=>a.installation_date=d),"class-name":"installation_date",error:!!a.errors.get("installation_date")},null,8,["modelValue","error"]),l(n,{class:"mt-2",message:a.errors.get("installation_date")},null,8,["message"])])]),s("div",de,[s("div",se,[l(g,{onButtonClicked:I,type:"save"},{default:f(()=>[v(" Save ")]),_:1}),l(g,{onButtonClicked:e[10]||(e[10]=d=>w("resetForm")),type:"cancel"},{default:f(()=>[v(" Cancel ")]),_:1})])])])]),_:1},8,["title"])]))}};export{ye as default};
