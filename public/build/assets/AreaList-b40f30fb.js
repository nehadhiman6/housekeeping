import"./index-4bb81809.js";import{K as x,i as y,j as h,o as l,c as d,w as s,a as i,f as m,b as v,g as k}from"./app-92be7c25.js";import{_ as w}from"./AppLayout-44e5a529.js";import A from"./ListWrapper-0c2f9604.js";import C from"./ButtonComp-7a3fe749.js";import N from"./AreaForm-06562c9a.js";import{g as O}from"./globalMixin-827f0fbc.js";import"./SideNavLink-7f5d99b7.js";import"./SideNavDropDown-3a860ee4.js";import"./SideDropDownItemLink-cd206ce4.js";import"./ProjectLogo-ab93dec1.js";import"./BreadCrumbs-ba3968f1.js";import"./FormWrapper-5c0db3ce.js";import"./InputLabel-69092e66.js";import"./TextInput-414aae93.js";import"./SelectInput-e436eb1f.js";import"./InputError-fee228bf.js";import"./DepartmentUserSelect-bb848c24.js";const T=i("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Area Lists ",-1),j=i("i",{class:"fa-solid fa-plus mr-2"},null,-1),B=i("table",{id:"areas_list",width:"100%",class:"row-border stripe"},null,-1),Q={__name:"AreaList",props:["departments"],setup(p){const{base_url:c,canAny:f,refreshComponent:L}=O(),u=x(),e=y({formOpen:!1,table:null,form_id:0}),_=()=>{e.form_id=0,e.formOpen=!1,e.table.ajax.reload(null,!1)},b=t=>{e.formOpen=!0,e.form_id=t};h(()=>{g()});const g=()=>{e.table=$("#areas_list").DataTable({processing:!0,serverSide:!0,searchDelay:700,ordering:!0,scrollX:!0,scrollY:"350px",scrollCollapse:!1,pageLength:10,ajax:{url:c.value+"/areas-list",type:"GET"},createdRow:function(t,r,a){$(t).addClass("bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600")},columns:[{title:"Sr no.",data:"id",render:function(t,r,a,o){var n=o.row+parseInt(o.settings.json.start)+1;return n}},{title:"Name",data:"name"},{title:"Department",render:function(t,r,a,o){var n=a.department?a.department.name:"";return n}},{title:"Area User",render:function(t,r,a,o){var n=a.area_user?a.area_user.name:"";return n}},{title:"Area User Contact No.",data:"person_contact_no"},{title:"Actions",orderable:!1,data:"id",visible:f(u.props.granted_permissions,["areas-modify"]),render:function(t,r,a,o){return"<button  data-item-id="+t+' class="inline-block dark:text-white px-4 py-2.5 mb-0 font-bold text-center align-middle transition-all bg-transparent border-0 rounded-lg shadow-none cursor-pointer leading-normal text-sm ease-in bg-150 hover:-translate-y-px active:opacity-85 bg-x-25 text-slate-700 edit-item"><i class="mr-2 fas fa-pencil-alt text-slate-700" aria-hidden="true"></i> Edit </button>'}}],drawCallback:function(t){$(".edit-item").on("click",function(r){e.formOpen=!1,setTimeout(function(){b(r.target.dataset.itemId)},100)})}})};return(t,r)=>(l(),d(w,{title:"Areas"},{header:s(()=>[T]),default:s(()=>[i("div",null,[e.formOpen?(l(),d(N,{key:0,onResetForm:_,form_id:e.form_id,departments:p.departments},null,8,["form_id","departments"])):m("",!0),v(A,{title:"Areas List"},{button:s(()=>[e.formOpen==!1?(l(),d(C,{key:0,onButtonClicked:r[0]||(r[0]=a=>e.formOpen=!0),type:"new"},{default:s(()=>[j,k(" New Area ")]),_:1})):m("",!0)]),table:s(()=>[B]),_:1})])]),_:1}))}};export{Q as default};
