import E from"./SelectInput-e436eb1f.js";import p from"./InputLabel-69092e66.js";import P from"./TextAreaInput-5805d6a7.js";import L from"./Pond-92ab9999.js";import q from"./Modal-6df8922c.js";import C from"./ButtonComp-7a3fe749.js";import z from"./IconButton-924cc06d.js";import"./lg-thumbnail.es5-23dc7a40.js";/* empty css                                                     */import{_ as v}from"./InputError-fee228bf.js";import{g as J}from"./globalMixin-827f0fbc.js";import{i as G,z as H,j as K,q as x,l as b,o as r,c as m,w as f,a,t as A,e as u,b as c,f as i,n as w,h as F,u as _,F as O,g as N}from"./app-92be7c25.js";const Q={class:"px-6 py-4"},W=["textContent"],X={class:"mt-4 text-sm text-gray-600"},Y={class:"flex -mx-3"},Z={key:0,class:"w-full max-w-full px-3 md:w-1/12"},ee={class:"mb-2 text-center uppercase"},te={key:1,class:"w-full max-w-full px-3 md:w-3/12"},se={class:"mb-2 text-center uppercase"},ae={key:2,class:"w-full max-w-full px-3 md:w-6/12"},re={class:"mb-2 text-center uppercase"},le={class:"mb-2 text-center uppercase"},oe={key:0,class:"w-full max-w-full px-3 md:w-1/12"},ne={class:"mb-4"},ie=a("br",null,null,-1),ue={key:1,class:"w-full max-w-full px-3 md:w-3/12 md:flex-0"},ce={class:"mb-4"},de={key:2,class:"w-full max-w-full px-3 md:w-6/12"},me={class:"mb-4"},fe={class:""},he={class:"rounded-lg bg-[#111] mx-4 cursor-pointer"},pe=["src","onClick"],ye={key:0,class:"flex -mx-3"},ve={class:"flex flex-row justify-end px-6 py-4 bg-gray-100 text-right"},xe={class:""},be=["textContent"],we=["src"],Ue={__name:"AttachmentUploadModal",props:{instantUpload:{type:Boolean,default:!0},stylePanelLayout:{type:[String,Object],default:null},maxFileSize:{default:"50MB"},labelMaxFileSize:{type:String,default:"maximum 50MB"},labelMaxFileSizeExceeded:{type:String,default:"Exceed Size"},docTypes:{type:Array,default:function(){return[]}},initialResources:{type:Array,default:function(){return[]}},showDescription:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},numberAttachments:{type:[Number,String],default:0},oneByOneServerUpload:{type:[Boolean],default:!0},loopPreview:{type:Boolean,default:!1},strictFixedNumbers:{type:Boolean,default:!1},saveFormOnSaveClicked:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},errors:{type:Object,default:function(){return{errors:{}}}},cancelClicked:{type:Boolean,default:!1},path:{type:[Number,String],default:"shared-attachments"},pathThumbnail:{type:[Number,String],default:"shared-attachments-thumbnail"},showAddBtn:{type:Boolean,default:!0},title:{type:String,default:" Attachment Upload Modal"},readOnly:{type:Boolean,default:!1}},emits:["updateResources","cancelPage","updateStatus"],setup(t,{emit:g}){const e=t,{base_url:y}=J(),k=()=>({id:0,attachment_id:0,doc_type:"0",doc_description:"",random:Utilities.getRandomNumber()}),s=G({token:$('meta[name="csrf-token"]').attr("content"),resources:[],previewImageId:0});H(()=>{s.show=!1}),K(()=>{s.show=!0,s.resources=JSON.parse(JSON.stringify(e.initialResources));var l=s.resources.length;if(s.resources.length==0)do if(s.resources.push(k()),l++,e.strictFixedNumbers==!1)break;while(l<e.numberAttachments)});const T=x(()=>e.numberAttachments==0?!0:!(e.strictFixedNumbers==!0||s.resources.length>=e.numberAttachments)),U=x(()=>{if(d.value>10)return"2xl";if(d.value<=10&&d.value>5)return"3xl";if(d.value<=5)return"4xl"}),d=x(()=>{let l=12;return(e.numberAttachments==0||e.numberAttachments>1)&&(l=l-1),e.docTypes.length>0&&(l=l-3),e.showDescription&&(l=l-6),l}),V=()=>{g("updateResources",!0,s.resources),e.saveFormOnSaveClicked||(s.show=!1)},M=()=>{s.resources.push(k())},I=l=>{s.resources.splice(l,1)},S=(l=0)=>{s.previewImageId=l};return(l,B)=>{const D=b("photo-preview"),R=b("photo-consumer"),j=b("photo-provider");return r(),m(q,{show:s.show,"max-width":U.value,closeable:l.closeable,onClose:l.close},{default:f(()=>[a("div",Q,[a("div",{class:"text-lg font-medium text-gray-900",textContent:A(e.title)},null,8,W),a("div",X,[a("div",Y,[e.numberAttachments!=1?(r(),u("div",Z,[a("div",ee,[c(p,{for:"name",value:"Sr. no."})])])):i("",!0),e.docTypes.length>0?(r(),u("div",te,[a("div",se,[c(p,{for:"name",value:"Type"})])])):i("",!0),t.showDescription==!0?(r(),u("div",ae,[a("div",re,[c(p,{for:"name",value:"Description"})])])):i("",!0),a("div",{class:w("w-full max-w-full px-3 md:w-"+d.value+"/12")},[a("div",le,[c(p,{for:"name",value:"Attachment"})])],2)]),(r(!0),u(O,null,F(s.resources,(n,o)=>(r(),u("div",{class:"flex -mx-3",key:o},[e.numberAttachments!=1?(r(),u("div",oe,[a("div",ne,[c(p,{for:"name",value:o+1},null,8,["value"]),ie,t.readOnly?i("",!0):(r(),m(z,{key:0,onButtonClicked:h=>I(o),icon:"fa fa-trash ml-2 text-red-400 "},null,8,["onButtonClicked"]))])])):i("",!0),e.docTypes.length>0?(r(),u("div",ue,[a("div",ce,[c(E,{modelValue:n.doc_type,"onUpdate:modelValue":h=>n.doc_type=h,options:e.docTypes,disabled:t.readOnly,error:!!(t.errors.errors&&t.errors.errors["resources."+o+".doc_type"])},null,8,["modelValue","onUpdate:modelValue","options","disabled","error"]),c(v,{class:"mt-2",message:t.errors.errors&&t.errors.errors["resources."+o+".doc_type"]&&t.errors.errors["resources."+o+".doc_type"].length>0&&t.errors.errors["resources."+o+".doc_type"][0]},null,8,["message"])])])):i("",!0),t.showDescription==!0?(r(),u("div",de,[a("div",me,[c(P,{modelValue:n.doc_description,"onUpdate:modelValue":h=>n.doc_description=h,disabled:t.readOnly,error:!!(t.errors.errors&&t.errors.errors["resources."+o+".doc_description"])},null,8,["modelValue","onUpdate:modelValue","disabled","error"]),c(v,{class:"mt-2",message:t.errors.errors&&t.errors.errors["resources."+o+".doc_description"]&&t.errors.errors["resources."+o+".doc_description"].length>0&&t.errors.errors["resources."+o+".doc_description"][0]},null,8,["message"])])])):i("",!0),t.readOnly==!1?(r(),u("div",{key:3,class:w("w-full max-w-full px-3 md:w-"+d.value+"/12")},[a("div",fe,[(r(),m(L,{key:n.random,index:o,resource:n,editable:e.editable,path:e.path,"path-thumbnail":e.pathThumbnail,"instant-upload":e.instantUpload,"style-panel-layout":e.stylePanelLayout,"max-file-size":e.maxFileSize,"label-max-file-size":e.labelMaxFileSize,"label-max-file-size-exceeded":e.labelMaxFileSizeExceeded,"initial-files":e.initialResources,"one-by-one-server-upload":t.oneByOneServerUpload,"strict-fixed-numbers":e.strictFixedNumbers,onSetSelectedFile:S},null,8,["index","resource","editable","path","path-thumbnail","instant-upload","style-panel-layout","max-file-size","label-max-file-size","label-max-file-size-exceeded","initial-files","one-by-one-server-upload","strict-fixed-numbers"])),c(v,{class:"mt-2",message:t.errors.errors&&t.errors.errors["resources."+o+".attachment_id"]&&t.errors.errors["resources."+o+".attachment_id"].length>0&&t.errors.errors["resources."+o+".attachment_id"][0]},null,8,["message"])])],2)):i("",!0),t.readOnly==!0?(r(),u("div",{key:4,class:w("bg-[#f1f0ef] border-neutral-200 w-full max-w-full p-4 mb-4 md:w-"+d.value+"/12")},[a("div",he,[a("img",{class:"max-w-[162px] max-h-[100px] object-cover mx-auto",src:_(y)+"/"+e.pathThumbnail+"/"+n.attachment.id,onClick:h=>S(n.attachment.id)},null,8,pe)])],2)):i("",!0)]))),128)),T.value&&t.readOnly==!1?(r(),u("div",ye,[c(z,{onButtonClicked:M,icon:"fa fa-plus-square mr-2"},{default:f(()=>[N(" ADD ")]),_:1})])):i("",!0)])]),a("div",ve,[a("div",xe,[t.readOnly==!1?(r(),m(C,{key:0,onButtonClicked:V,type:"save"},{default:f(()=>[N("Save")]),_:1})):i("",!0),c(C,{onButtonClicked:B[0]||(B[0]=n=>g("updateStatus")),type:"cancel"},{default:f(()=>[a("span",{textContent:A(t.readOnly?"Close":"Cancel")},null,8,be)]),_:1})])]),s.resources.length>0&&s.previewImageId>0?(r(),m(D,{key:0,images:["https://picsum.photos/200/300"]},null,8,["images"])):i("",!0),s.resources.length>0&&s.previewImageId>0?(r(),m(j,{key:1},{default:f(()=>[(r(!0),u(O,null,F(s.resources.length>0,n=>(r(),m(R,{intro:s.resources,key:n.id,src:_(y).value+"/"+e.pathThumbnail+"/"+n.attachment_id},{default:f(()=>[a("img",{src:_(y).value+"/"+e.pathThumbnail+"/"+n.attachment_id,class:"view-box"},null,8,we)]),_:2},1032,["intro","src"]))),128))]),_:1})):i("",!0)]),_:1},8,["show","max-width","closeable","onClose"])}}};export{Ue as default};
