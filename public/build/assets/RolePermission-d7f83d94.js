import{d as E}from"./index-4bb81809.js";import{_ as I}from"./AppLayout-44e5a529.js";import b from"./CheckboxInput-75e356eb.js";import A from"./TitleComponent-4ca32250.js";import F from"./ListWrapper-0c2f9604.js";import l from"./ButtonComp-7a3fe749.js";import G from"./UserNav-1c365146.js";import{g as M}from"./globalMixin-827f0fbc.js";import{j as N,o as p,c as O,w as c,b as n,a as t,t as d,e as h,h as y,F as C,g as v}from"./app-92be7c25.js";import"./SideNavLink-7f5d99b7.js";import"./SideNavDropDown-3a860ee4.js";import"./SideDropDownItemLink-cd206ce4.js";import"./ProjectLogo-ab93dec1.js";import"./BreadCrumbs-ba3968f1.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./UpperNavLink-2b7e1e80.js";const R=t("span",null," Update",-1),U={id:"roles_list",width:"100%",class:"row-border stripe"},V={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},S={scope:"col",class:"py-4 px-6"},T=t("th",{scope:"col",class:"py-4 px-6"}," Permission ",-1),j=t("th",{scope:"col",class:"py-4 px-6"},null,-1),D={class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 bg-indigo-500 bg-opacity-25"},L={colspan:"2",class:"py-4 px-6 font-bold text-gray-900 whitespace-nowrap dark:text-white text-center"},Y={class:"py-4 px-6"},q={class:"py-4 px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white"},z={class:"py-4 px-6"},H={class:"py-4 px-6"},J=t("span",null," Update",-1),de={__name:"RolePermission",props:["role","opt_groups","permissions","data"],setup(m){const i=m,{base_url:_}=M();N(()=>{i.permissions.forEach(s=>{$("#opt-permission-"+s).prop("checked",!0);var e=f(s);$("#opt-group-"+e[1].id).prop("checked",e[0])})});const w=(s,e)=>{$(s.target).is(":checked")?g(!0,e):g(!1,e)},B=(s,e)=>{if($(s.target).is(":checked"))i.permissions.push(e);else{let r=i.permissions.indexOf(e);i.permissions.splice(r,1)}var o=f(e);$("#opt-group-"+o[1].id).prop("checked",o[0])},f=s=>{var e=null,o=!0;return i.opt_groups.forEach(r=>{r.permissions.find(a=>a.id==s)&&(e=r)}),e.permissions.forEach(r=>{i.permissions.indexOf(r.id)<0&&(o=!1)}),[o,e]},g=(s,e)=>{let o=i.opt_groups.find(r=>r.id===e);console.log(s,e,o),o&&o.permissions.forEach(r=>{if(s)i.permissions.push(r.id);else{let a=i.permissions.indexOf(r.id);i.permissions.splice(a,1)}$("#opt-permission-"+r.id).prop("checked",s)})},k=()=>{axios.post(_.value+"/roles/"+i.role.id+"/permissions",{permissions:i.permissions}).then(function(s){Utilities.showPopMessage("Your data has been saved successfully!"),u()}).catch(function(s){})},u=()=>{E.Inertia.visit(_.value+"/roles")};return(s,e)=>(p(),O(I,{title:"Permissions",data:m.data},{default:c(()=>[n(G),n(F,{title:"Roles Permissions"},{table:c(()=>[t("table",U,[t("thead",V,[t("tr",null,[t("th",S,d(m.role.name),1),T,j])]),(p(!0),h(C,null,y(i.opt_groups,(o,r)=>(p(),h("tbody",{key:r},[t("tr",D,[t("td",L,d(o.opt_group),1),t("td",Y,[n(b,{id:"opt-group-"+o.id,value:o.id,onChanged:a=>w(a,o.id)},null,8,["id","value","onChanged"])])]),(p(!0),h(C,null,y(o.permissions,(a,x)=>(p(),h("tr",{key:x,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[t("td",q,d(x+1),1),t("td",z,d(a.label),1),t("td",H,[n(b,{id:"opt-permission-"+a.id,type:"checkbox",value:a.id,onChanged:P=>B(P,a.id)},null,8,["id","value","onChanged"])])]))),128))]))),128)),t("tfoot",null,[n(l,{onButtonClicked:k,type:"save"},{default:c(()=>[J]),_:1}),n(l,{onButtonClicked:u,type:"cancel"},{default:c(()=>[v(" Back ")]),_:1})])])]),default:c(()=>[n(A,null,{"right-content":c(()=>[n(l,{onButtonClicked:k},{default:c(()=>[R]),_:1}),n(l,{onButtonClicked:u},{default:c(()=>[v(" Back ")]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]))}};export{de as default};
