import{K as h,i as p,j as b,l as y,o as i,c as s,w as d,s as g,B as x,a as l,f as c,b as v,g as w}from"./app-92be7c25.js";import"./index-4bb81809.js";import{_ as M}from"./AppLayout-44e5a529.js";import k from"./ListWrapper-0c2f9604.js";import S from"./ButtonComp-7a3fe749.js";import D from"./CaseFilter-afb10de9.js";import{g as C}from"./globalMixin-827f0fbc.js";import"./SideNavLink-7f5d99b7.js";import"./SideNavDropDown-3a860ee4.js";import"./SideDropDownItemLink-cd206ce4.js";import"./ProjectLogo-ab93dec1.js";import"./BreadCrumbs-ba3968f1.js";import"./FilterWrapper-3eb81350.js";import"./InputLabel-69092e66.js";import"./InputError-fee228bf.js";import"./MachineTypeSelect-12373e3f.js";import"./MachineModelSelect-8f2a2e9e.js";import"./DepartmentSelect-20b0fcb3.js";import"./DatePicker-3e693273.js";const R=l("i",{class:"fa-solid fa-plus mr-2"},null,-1),T=l("table",{id:"service_list",width:"100%",class:"row-border stripe"},null,-1),X={__name:"MachineSummaryReport",props:[],setup(N){h();const{base_url:_,canAny:O}=C(),a=p({formOpen:!1,table:null,form_id:0,random:Utilities.getRandomNumber()}),t=p(new Form({machine_type_id:0,model_id:0,department_id:0,from_date:CMS.from_date,to_date:CMS.today})),m=()=>{a.form_id=0,a.table.ajax.reload(null,!1),a.formOpen=!1};b(()=>{f()});const f=()=>{a.table=$("#service_list").DataTable({dom:"Bfrtip",lengthMenu:[[10,25,50,-1],["10 rows","25 rows","50 rows","Show all"]],buttons:["pageLength",{extend:"excelHtml5",header:!0,footer:!0,exportOptions:{orthogonal:"export"},filename:function(){return"Housekeeping Machines Report (From Date :"+t.from_date+" To Date :"+t.to_date+") "},title:function(){var e="Housekeeping Machines Report (From Date :"+t.from_date+" To Date :"+t.to_date+") ";return e}},{extend:"pdfHtml5",orientation:"landscape",exportOptions:{orthogonal:"export"},customize:function(e){e.content[1].table.body.forEach(r=>{r.forEach(o=>{o.alignment="center"})}),e.content[1].table.widths=Array(e.content[1].table.body[0].length+1).join("*").split("")}}],processing:!0,serverSide:!0,searchDelay:700,ordering:!0,scrollY:"350px",scrollCollapse:!1,pageLength:10,ajax:{url:_.value+"/machines-report",type:"GET",data:function(e){e.report=!0,e.machine_type_id=t.machine_type_id,e.model_id=t.model_id,e.department_id=t.department_id,e.from_date=t.from_date,e.to_date=t.to_date}},createdRow:function(e,r,o){$(e).addClass("bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600")},columns:[{title:"Sr no.",data:"id",render:function(e,r,o,n){var u=n.row+parseInt(n.settings.json.start)+1;return u}},{title:"Machine Serial No",data:"serial_no"},{title:"Machine Code",data:"name_code_no"},{title:"Brand",data:"brand_name"},{title:"Machine Type",data:"machine_type"},{title:"Model",data:"model_no"},{title:"Department",data:"department_name"},{title:"Installation Date",data:"installation_date"},{title:"Warranty Upto Date",data:"warranty_upto_date"},{title:"No. of cases generated",data:"no_cases",render:function(e,r,o,n){return"<a   data-item-id="+o.id+" class='font-bold cursor-pointer text-sky-600 text-base services' >"+e+"</a>"}},{title:"No. of Services",data:"no_services",render:function(e,r,o,n){return"<a   data-item-id="+o.id+" class='font-bold cursor-pointer text-sky-600 text-base services' >"+e+"</a>"}}]})};return(e,r)=>{const o=y("case-form");return i(),s(M,{title:"Machine Report "},{default:d(()=>[g((i(),s(D,{key:a.random,form:t,onReloadTable:m},null,8,["form"])),[[x,a.formOpen==!1]]),l("div",null,[a.formOpen?(i(),s(o,{key:0,onReloadTable:m,form_id:a.form_id},null,8,["form_id"])):c("",!0),v(k,{title:"Machines  Report ( "+t.from_date+" - "+t.to_date+" )"},{button:d(()=>[a.formOpen==!1?(i(),s(S,{key:0,onButtonClicked:r[0]||(r[0]=n=>a.formOpen=!0),type:"new"},{default:d(()=>[R,w(" Schedule Service ")]),_:1})):c("",!0)]),table:d(()=>[T]),_:1},8,["title"])])]),_:1})}}};export{X as default};
