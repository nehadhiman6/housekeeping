import{g as i}from"./globalMixin-827f0fbc.js";import{d as s,j as c,a8 as p,o as f,e as m,n as y}from"./app-92be7c25.js";const g=["multiple","disabled","value"],b={__name:"AreaSelect",props:{modelValue:[String,Number],index:{default:-1,type:[String,Number]},initials:{default:()=>[],type:Array},selected:{default:()=>[],type:Array},url:{default:"areas/filtered",type:String},getIndex:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean},customClass:{default:"selectItem",type:String},focus:{default:!1,type:Boolean},enableNew:{default:!1,type:Boolean},placeholder:{default:"Select Area",type:String},type:{default:"all",type:String},multiple:{default:!1,type:Boolean},allowClear:{default:!0,type:Boolean},department_id:{default:0,type:[Number,String]},strictCheck:{default:!0,type:Boolean}},emits:["updateArea","update:modelValue"],setup(l,{emit:n}){const e=l,{base_url:o}=i();s(0),c(()=>{u()}),p(()=>{$(".area_"+e.index).select2("destroy")});const u=()=>{var d=$(".area_"+e.index);d.select2({dropdownAutoWidth:!0,placeholder:e.placeholder,allowClear:e.allowClear,width:"100%",data:e.initials,dropdownParent:$("body"),ajax:{method:"POST",url:function(){return o.value+"/"+e.url},delay:250,dataType:"json",cache:!0,data:function(t){var a={search:t.term,page:t.page||1,type:e.type,department_id:e.department_id,strict_check:e.strictCheck};return a},processResults:function(t,a){return a.page=a.page||1,t.results.forEach(function(r){r.text=r.name}),t.pagination={more:a.page*30<t.count_filtered},t}},templateResult:e.setName,templateSelection:e.selection}).on("change",function(){var t=$(".area_"+e.index).val();e.multiple==!1?n("update:modelValue",t):e.multiple==!0&&n("updateArea",t,e.index)}).on("select2:select",function(t){var a=$(".area_"+e.index).val();e.selected_data=t.params.data,e.selected_data!={}&&n("updateArea",a,e.index,e.selected_data)}).on("select2:clear",function(t){var a=$(".area_"+e.index).val();if(e.multiple==!1){var r=a||0;n("input",r)}}),typeof e.index<"u"&&$(".area_"+e.index).val(e.selected).change()};return(d,t)=>(f(),m("select",{multiple:l.multiple,disabled:l.disabled,ref:"input",class:y("area_"+l.index+" border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm mt-1 block w-full"),value:l.modelValue,onInput:t[0]||(t[0]=a=>n("update:modelValue",a.target.value))},null,42,g))}};export{b as default};
