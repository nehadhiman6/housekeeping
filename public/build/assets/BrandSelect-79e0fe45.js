import{g as i}from"./globalMixin-827f0fbc.js";import{d as s,j as c,a8 as p,o as f,e as m,n as y}from"./app-92be7c25.js";const g=["multiple","value"],v={__name:"BrandSelect",props:{modelValue:[String,Number],index:{default:-1,type:[String,Number]},initials:{default:()=>[],type:Array},selected:{default:()=>[],type:Array},url:{default:"brands/filtered",type:String},getIndex:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean},customClass:{default:"selectItem",type:String},focus:{default:!1,type:Boolean},enableNew:{default:!1,type:Boolean},placeholder:{default:"Select Brand",type:String},type:{default:"all",type:String},multiple:{default:!1,type:Boolean},allowClear:{default:!0,type:Boolean},siteId:{default:0,type:[Number,String]}},emits:["updateBrand","update:modelValue"],setup(n,{emit:l}){const e=n,{base_url:r}=i();s(0),c(()=>{u()}),p(()=>{$(".brand_"+e.index).select2("destroy")});const u=()=>{var o=$(".brand_"+e.index);o.select2({dropdownAutoWidth:!0,placeholder:e.placeholder,allowClear:e.allowClear,width:"100%",data:e.initials,dropdownParent:$("body"),ajax:{method:"POST",url:function(){return r.value+"/"+e.url},delay:250,dataType:"json",cache:!0,data:function(t){var a={search:t.term,page:t.page||1,type:e.type};return a},processResults:function(t,a){return a.page=a.page||1,t.results.forEach(function(d){d.text=d.name}),t.pagination={more:a.page*30<t.count_filtered},t}},templateResult:e.setName,templateSelection:e.selection}).on("change",function(){var t=$(".brand_"+e.index).val();e.multiple==!1?l("update:modelValue",t):e.multiple==!0&&l("updateBrand",t,e.index)}).on("select2:select",function(t){var a=$(".brand_"+e.index).val();e.selected_data=t.params.data,e.selected_data!={}&&l("updateBrand",a,e.index,e.selected_data)}).on("select2:clear",function(t){var a=$(".brand_"+e.index).val();if(e.multiple==!1){var d=a||0;l("input",d)}}),typeof e.index<"u"&&$(".brand_"+e.index).val(e.selected).change()};return(o,t)=>(f(),m("select",{multiple:n.multiple,ref:"input",class:y("brand_"+n.index+" border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm mt-1 block w-full"),value:n.modelValue,onInput:t[0]||(t[0]=a=>l("update:modelValue",a.target.value))},null,42,g))}};export{v as default};
