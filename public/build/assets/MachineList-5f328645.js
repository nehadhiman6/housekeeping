import{i as u,j as x,o as l,c as d,w as n,b as i,f as p,s as w,B as y,a as f,g as k}from"./app-92be7c25.js";import"./index-4bb81809.js";import{_ as v}from"./AppLayout-44e5a529.js";import D from"./ListWrapper-0c2f9604.js";import M from"./ButtonComp-7a3fe749.js";import h from"./Modal-6df8922c.js";import C from"./MachineForm-44e44a0a.js";import O from"./MachineFilter-3833d24f.js";import F from"./CaseForm-b9a29904.js";import T from"./DepartmentChange-30ecf7c8.js";import{g as B}from"./globalMixin-827f0fbc.js";import"./SideNavLink-7f5d99b7.js";import"./SideNavDropDown-3a860ee4.js";import"./SideDropDownItemLink-cd206ce4.js";import"./ProjectLogo-ab93dec1.js";import"./BreadCrumbs-ba3968f1.js";import"./FormWrapper-5c0db3ce.js";import"./InputLabel-69092e66.js";import"./TextInput-414aae93.js";import"./BrandSelect-79e0fe45.js";import"./MachineTypeSelect-12373e3f.js";import"./MachineModelSelect-8f2a2e9e.js";import"./DepartmentSelect-20b0fcb3.js";import"./AreaSelect-d5b0446d.js";import"./DatePicker-3e693273.js";import"./InputError-fee228bf.js";import"./FilterWrapper-3eb81350.js";import"./TextAreaInput-5805d6a7.js";import"./SelectInput-e436eb1f.js";import"./MachineSelect-7875d756.js";const S=f("i",{class:"fa-solid fa-plus mr-2"},null,-1),H=f("table",{id:"machine_list",width:"100%",class:"row-border stripe"},null,-1),pe={__name:"MachineList",props:[],setup(I){const{base_url:_,canAny:j}=B(),e=u({formOpen:!1,table:null,form_id:0,showCaseForm:!1,changeDepartment:!1}),r=u(new Form({brand_id:"",model_id:"",machine_type_id:"",department_id:"",area_id:""})),s=()=>{e.form_id=0,e.table.ajax.reload(null,!1),e.formOpen=!1,e.showCaseForm=!1,e.changeDepartment=!1},g=t=>{e.formOpen=!0,e.form_id=t};x(()=>{b()});const b=()=>{e.table=$("#machine_list").DataTable({dom:"Bfrtip",lengthMenu:[[10,25,50,-1],["10 rows","25 rows","50 rows","Show all"]],buttons:["pageLength",{extend:"excelHtml5",header:!0,footer:!0,exportOptions:{orthogonal:"export",columns:":not(:last-child)"},filename:function(){return"Housekeeping Machines"},title:function(){var t="Housekeeping Machines";return t}},{extend:"pdfHtml5",orientation:"landscape",exportOptions:{orthogonal:"export",columns:":not(:last-child)"},customize:function(t){t.content[1].table.widths=Array(t.content[1].table.body[0].length+1).join("*").split("")}}],processing:!0,serverSide:!0,searchDelay:700,ordering:!0,scrollX:!0,scrollY:"350px",iDisplayLength:10,scrollCollapse:!1,pageLength:10,fixedColumns:{left:2,right:1},ajax:{url:_.value+"/machines-list",type:"GET",data:function(t){t.brand_id=r.brand_id,t.model_id=r.model_id,t.machine_type_id=r.machine_type_id,t.department_id=r.department_id,t.area_id=r.area_id}},createdRow:function(t,a,m){$(t).addClass("bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600")},columns:[{title:"Sr no.",data:"id",render:function(t,a,m,c){var o=c.row+parseInt(c.settings.json.start)+1;return o}},{title:"Machine Serial No.",data:"serial_no"},{title:"Brand",data:"brand_name"},{title:"Model",data:"model_no"},{title:"Machine Type",data:"machine_type"},{title:"Department",data:"department_name"},{title:"Area",data:"area"},{title:"Buy Date",data:"buy_date"},{title:"Installation Date",data:"installation_date"},{title:"Warranty Date",data:"warranty_upto_date"},{title:"Actions",orderable:!1,data:"id",render:function(t,a,m,c){var o="<button  data-item-id="+t+' class="inline-block dark:text-white px-4 py-2.5 mb-0 font-bold text-center align-middle transition-all bg-transparent border-0 rounded-lg shadow-none cursor-pointer leading-normal text-sm ease-in bg-150 hover:-translate-y-px active:opacity-85 bg-x-25 text-slate-700  edit-item"><i class="mr-2 fas fa-pencil-alt text-slate-700  edit-item" aria-hidden="true"  data-item-id='+t+"></i> Edit </button>";return o+="<button  data-item-id="+t+' class="inline-block dark:text-white px-4 py-2.5 mb-0 font-bold text-center align-middle transition-all bg-transparent border-0 rounded-lg shadow-none cursor-pointer leading-normal text-sm ease-in bg-150 hover:-translate-y-px active:opacity-85 bg-x-25 text-slate-700  generate-case">Schedule Service </button>',o+="<button  data-item-id="+t+' class="inline-block dark:text-white px-4 py-2.5 mb-0 font-bold text-center align-middle transition-all bg-transparent border-0 rounded-lg shadow-none cursor-pointer leading-normal text-sm ease-in bg-150 hover:-translate-y-px active:opacity-85 bg-x-25 text-slate-700  change-department">Change Department </button>',o}}],drawCallback:function(t){$(".edit-item").on("click",function(a){e.formOpen=!1,setTimeout(function(){g(a.target.dataset.itemId)},200)}),$(".generate-case").on("click",function(a){e.formOpen=!1,setTimeout(function(){e.showCaseForm=!0,e.form_id=a.target.dataset.itemId},200)}),$(".change-department").on("click",function(a){e.changeDepartment=!1,e.formOpen=!1,setTimeout(function(){e.changeDepartment=!0,e.form_id=a.target.dataset.itemId},200)})}}),$("thead > tr> th:nth-child(11)").css({"min-width":"300px"})};return(t,a)=>(l(),d(v,{title:"Housekeeping Machines"},{default:n(()=>[i(h,{show:e.showCaseForm,"max-width":"5xl"},{default:n(()=>[i(F,{machine_id:e.form_id,onResetForm:s},null,8,["machine_id"])]),_:1},8,["show"]),i(h,{show:e.changeDepartment,"max-width":"4xl"},{default:n(()=>[e.changeDepartment?(l(),d(T,{key:0,machine_id:e.form_id,onResetForm:s},null,8,["machine_id"])):p("",!0)]),_:1},8,["show"]),w(i(O,{form:r,onReloadTable:s},null,8,["form"]),[[y,e.formOpen==!1]]),f("div",null,[e.formOpen?(l(),d(C,{key:0,onResetForm:s,form_id:e.form_id},null,8,["form_id"])):p("",!0),i(D,{title:"Housekeeping Machines List"},{button:n(()=>[e.formOpen==!1?(l(),d(M,{key:0,onButtonClicked:a[0]||(a[0]=m=>e.formOpen=!0),type:"new"},{default:n(()=>[S,k(" Add Machine ")]),_:1})):p("",!0)]),table:n(()=>[H]),_:1})])]),_:1}))}};export{pe as default};
