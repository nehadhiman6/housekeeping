import k from"./FormWrapper-5c0db3ce.js";import _ from"./ButtonComp-7a3fe749.js";import d from"./InputLabel-69092e66.js";import c from"./TextInput-414aae93.js";import C from"./SelectInput-e436eb1f.js";import{_ as i}from"./InputError-fee228bf.js";import{i as f,q as y,j as F,o as p,e as g,b as r,w as m,a as s,f as $,g as w}from"./app-92be7c25.js";import q from"./DepartmentUserSelect-bb848c24.js";import{g as A}from"./globalMixin-827f0fbc.js";const U={class:"flex flex-wrap items-end -mx-3"},B={class:"w-full max-w-full px-3 shrink-0 lg:w-1/4 md:w-1/3 md:flex-0"},N={class:"mb-4"},S={class:"w-full max-w-full px-3 shrink-0 lg:w-1/4 md:w-1/3 md:flex-0"},I={class:"mb-4"},M={class:"w-full max-w-full px-3 shrink-0 lg:w-1/4 md:w-1/3 md:flex-0"},P={key:0,class:"mb-4"},T={class:"w-full max-w-full px-3 shrink-0 lg:w-1/4 md:w-1/3 md:flex-0"},j={class:"mb-4"},D={class:"w-full max-w-full px-3 shrink-0 lg:w-1/4 md:w-1/3 md:flex-0"},E={class:"mb-4"},R={__name:"AreaForm",props:["form_id","departments"],emits:["resetForm"],setup(x,{emit:u}){const n=x,{base_url:v}=A(),e=f(new Form({form_id:0,name:"",department_id:0,area_user_id:0,person_contact_no:""})),l=f({create_url:"areas",userInitials:[],userSelected:[],show:!0}),h=y(()=>n.form_id>0?"Update Area":"Add Area");F(()=>{n.form_id>0&&b()});const V=()=>{e.postForm(l.create_url).then(function(a){console.log(a),a.success&&(u("resetForm"),Utilities.showPopMessage("Your data has been saved successfully!"))}).catch(function(a){})},b=()=>{axios.get(v.value+"/areas/"+n.form_id+"/edit").then(function(a){if(a.data.success){let t=a.data.area;e.name=t.name,e.department_id=t.department_id,t.area_user&&(l.userInitials=[{id:t.area_user.id,text:t.area_user.name}],l.userSelected=[t.area_user.id],Utilities.refreshComponent(l,"show"))}e.form_id=n.form_id}).catch(function(a){})};return(a,t)=>(p(),g("div",null,[r(k,{title:h.value},{default:m(()=>[s("div",U,[s("div",B,[s("div",N,[r(d,{for:"name",value:"Name",required:!0}),r(c,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=o=>e.name=o),type:"text",required:"",autofocus:"",error:!!e.errors.get("name")},null,8,["modelValue","error"]),r(i,{class:"mt-2",message:e.errors.get("name")},null,8,["message"])])]),s("div",S,[s("div",I,[r(d,{for:"department_id",value:"Department",required:!0}),r(C,{modelValue:e.department_id,"onUpdate:modelValue":t[1]||(t[1]=o=>e.department_id=o),options:n.departments,error:!!e.errors.get("department_id")},null,8,["modelValue","options","error"]),r(i,{class:"mt-2",message:e.errors.get("department_id")},null,8,["message"])])]),s("div",M,[l.show?(p(),g("div",P,[r(d,{for:"area_user_id",value:"Area Concerned user",required:!1}),r(q,{initials:l.userInitials,selected:l.userSelected,department_id:e.department_id,modelValue:e.area_user_id,"onUpdate:modelValue":t[2]||(t[2]=o=>e.area_user_id=o)},null,8,["initials","selected","department_id","modelValue"]),r(i,{class:"mt-2",message:e.errors.get("area_user_id")},null,8,["message"])])):$("",!0)]),s("div",T,[s("div",j,[r(d,{for:"person_contact_no",value:"Concerned Person Contact",required:!1}),r(c,{modelValue:e.person_contact_no,"onUpdate:modelValue":t[3]||(t[3]=o=>e.person_contact_no=o),type:"text",required:"",error:!!e.errors.get("person_contact_no")},null,8,["modelValue","error"]),r(i,{class:"mt-2",message:e.errors.get("person_contact_no")},null,8,["message"])])]),s("div",D,[s("div",E,[r(_,{onButtonClicked:V,type:"save"},{default:m(()=>[w("Save")]),_:1}),r(_,{onButtonClicked:t[4]||(t[4]=o=>u("resetForm")),type:"cancel"},{default:m(()=>[w("Cancel")]),_:1})])])])]),_:1},8,["title"])]))}};export{R as default};
