import{g as m}from"./globalMixin-827f0fbc.js";import{d as p,q as g,j as x,a8 as v,o as y,e as w,n as b}from"./app-92be7c25.js";const h=["multiple","value"],B={__name:"MaintenanceSelect",props:{modelValue:[String,Number],index:{default:-1,type:[String,Number]},initials:{default:()=>[],type:Array},selected:{default:()=>[],type:Array},url:{default:"maintenances/filtered",type:String},getIndex:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean},customClass:{default:"selectItem",type:String},focus:{default:!1,type:Boolean},enableNew:{default:!1,type:Boolean},placeholder:{default:"Select Maintenance",type:String},type:{default:"all",type:String},multiple:{default:!1,type:Boolean},allowClear:{default:!0,type:Boolean},error:{default:!1}},emits:["updateMaintenance","update:modelValue"],setup(i,{emit:l}){const e=i,{base_url:u}=m(),r=p(0),d=g(()=>e.error?"maintenance_"+e.index+" border-red-400 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm mt-1 block w-full":"maintenance_"+e.index+" border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm mt-1 block w-full");x(()=>{s()}),v(()=>{$(".maintenance_"+e.index).select2("destroy")});const s=()=>{var n=$(".maintenance_"+e.index);n.select2({dropdownAutoWidth:!0,placeholder:e.placeholder,allowClear:e.allowClear,width:"100%",data:e.initials,dropdownParent:$("body"),ajax:{method:"POST",url:function(){return u.value+"/"+e.url},delay:250,dataType:"json",cache:!0,data:function(t){var a={search:t.term,page:t.page||1,type:e.type};return a},processResults:function(t,a){return a.page=a.page||1,t.results.forEach(function(o){o.text=o.name}),t.pagination={more:a.page*30<t.count_filtered},t}},templateResult:c,templateSelection:f}).on("change",function(){console.log("select2 change ");var t=$(".maintenance_"+e.index).val();e.multiple==!1?l("update:modelValue",t):e.multiple==!0&&l("updateMaintenance",t,e.index)}).on("select2:select",function(t){console.log("select2 Select ");var a=$(".maintenance_"+e.index).val();r.value=t.params.data,r.value!={}&&l("updateMaintenance",a,e.index,r.value)}).on("select2:clear",function(t){var a=$(".maintenance_"+e.index).val();if(e.multiple==!1){var o=a||0;l("input",o)}}),typeof e.index<"u"&&$(".maintenance_"+e.index).val(e.selected).change()},c=n=>{if(!n.id)return n.text;var t=$('<div class="flex flex-wrap -mx-3"><div class="w-full md:w-1/1 px-3 md:mb-0">'+n.text+"</div></div>");return t},f=n=>{if(!n.id)return n.text;var t=$('<div class="flex flex-wrap -mx-3"><div class="w-full md:w-1/1 px-3 mb-6 md:mb-0">'+n.text+"</div></div>");return t};return(n,t)=>(y(),w("select",{multiple:i.multiple,class:b(d.value),value:i.modelValue,key:e.index,onInput:t[0]||(t[0]=a=>n.$emit("update:modelValue",a.target.value))},null,42,h))}};export{B as default};
